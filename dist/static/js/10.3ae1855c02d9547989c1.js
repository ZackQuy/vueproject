webpackJsonp([10],{467:function(t,e,a){function i(t){a(951)}var s=a(25)(a(913),a(972),i,null,null);t.exports=s.exports},913:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{time_opters:[{start:"00:00",end:"24:00",step:"00:05",starttime:"00:00",endtime:"00:05",percent:5}],strate_datarule_info:{name:"",is_immediately:1,day:1,fail:{num:100,maxsize:10}},deal_with_fail:!0}},methods:{cur_5mins:function(t){var e=+new Date("2012-1-2 "+t+":00")+3e5,a=new Date(e),i=String(a.getHours()).padStart(2,"0"),s=String(a.getMinutes()).padStart(2,"0"),l=i+":"+s;return"00:00"!==l?l:"24:00"},time_pickter_set:function(t){this.time_opters[t].endtime=this.cur_5mins(this.time_opters[t].starttime)},addOpter:function(){if("24:00"==this.time_opters[this.time_opters.length-1].endtime)return void this.$valid([{valid:"",msg:"请按照先后顺序添加时间段"}]);if(this.time_opters.length>=20)this.$valid([{valid:"",msg:"当前添加的上传时间已到达上限"}]);else{var t=this.time_opters[this.time_opters.length-1].endtime;this.time_opters.push({start:t,end:"24:00",step:"00:05",starttime:t,endtime:this.cur_5mins(t),percent:5})}},delectOpter:function(){this.time_opters.pop()},new_strate_datarule:function(){var t=this,e=[{valid:this.strate_datarule_info.name.length>3,msg:"请确认数据上传规则名称长度不少于4位"},{valid:this.strate_datarule_info.name.length<17,msg:"请确认数据上传规则名称长度不超过16位"},{valid:this.$rules.name_rule(this.strate_datarule_info.name),msg:"请确认数据上传规则名称不包含特殊字符"}],a={name:this.strate_datarule_info.name,rate:this.strate_datarule_info.day,is_immediate:this.strate_datarule_info.is_immediately};if(this.strate_datarule_info.is_immediately||e.push({valid:this.$rules.num_rule(this.strate_datarule_info.day),msg:"请确认定时上传的间隔天数为正整数"}),this.deal_with_fail?(a.num=this.strate_datarule_info.fail.num,e.push({valid:this.$rules.num_rule(this.strate_datarule_info.fail.num),msg:"请确认上传失败处理条数限制为正整数"})):(a.maxsize=this.strate_datarule_info.fail.maxsize,e.push({valid:this.$rules.num_rule(this.strate_datarule_info.fail.maxsize),msg:"请确认上传失败处理大小限制为正整数"})),this.strate_datarule_info.is_immediately)a.is_immediate=1;else{a.time=this.time_opters.map(function(a){return(!t.$rules.num_rule(a.percent)||a.percent<5)&&e.push({valid:"",msg:"请确认随机数设置为不小于5的正整数"}),a.starttime+"-"+a.endtime+"-"+a.percent});var i=this.time_opters.map(function(t,e){return t.percent}).reduce(function(t,e){return 1*t+1*e});e.push({valid:i<=100,msg:"请确认随机数之和不超过100%"})}this.$valid(e).then(function(){t.$store.dispatch("stratery/strateDataUploadRule",a)})}},mounted:function(){}}},934:function(t,e,a){e=t.exports=a(459)(!1),e.push([t.i,".page_strate_data_rule_new .page_update_submit_info{margin:10px auto}.page_strate_data_rule_new .checkbox_config{margin:20px auto 30px}.page_strate_data_rule_new .legend_layout{padding:30px;border:1px solid #c9c9c9;border-radius:2px;position:relative;margin:30px 0 40px}.page_strate_data_rule_new .legend_layout .legend_title{position:absolute;background:#fff;color:#222;font-size:16px;font-weight:700;top:-14px;left:20px;padding:4px 10px}.page_strate_data_rule_new .legend_layout .checkbox_item{margin-top:10px}.page_strate_data_rule_new .page_body{position:relative}.page_strate_data_rule_new .cell{padding:0 2px}.page_strate_data_rule_new .tag_parnode{padding:4px}.page_strate_data_rule_new .col_1,.page_strate_data_rule_new .col_2,.page_strate_data_rule_new .col_3{height:35px;line-height:35px}.page_strate_data_rule_new .col_1{text-align:left}.page_strate_data_rule_new .col_2{text-align:center;font-size:15px}.page_strate_data_rule_new .col_3{text-align:right}.page_strate_data_rule_new .l_h_30{line-height:30px}.page_strate_data_rule_new .legend_selector_span{line-height:30px;padding:0 4px}.page_strate_data_rule_new .legend_selector_item{display:inline-block;width:26%}.page_strate_data_rule_new .m_g_10{margin:16px 0}.page_strate_data_rule_new .title_button_layout .strate_module_title{line-height:34px;font-size:16px;font-weight:700}.page_strate_data_rule_new .title_button_layout .t_a_r{text-align:right}.page_strate_data_rule_new .delete_percent_btn{margin-left:10px;margin-top:1px}",""])},951:function(t,e,a){var i=a(934);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(460)("3b91307e",i,!0)},972:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_inner page_strate_data_rule_new"},[a("div",{staticClass:"page_head"},[a("el-breadcrumb",{attrs:{separator:">"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/config/stratery"}}},[t._v("\n        策略组列表\n      ")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/config/strates_chg"}}},[t._v("\n        更改策略组\n      ")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/config/strates_new"}}},[t._v("\n        新建策略组\n      ")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/config/strate_new"}}},[t._v("\n        新建策略\n      ")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/config/strate_data"}}},[t._v("\n        新建数据上传策略\n      ")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/config/strate_data_rule"}}},[t._v("\n        新建数据上传规则\n      ")])],1)],1),t._v(" "),a("div",{staticClass:"page_body"},[a("div",{staticClass:"page_update_submit_info"},[a("el-row",{attrs:{align:"bottom"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"col_1"},[a("el-input",{attrs:{placeholder:"请输入数据上传规则名称"},model:{value:t.strate_datarule_info.name,callback:function(e){t.strate_datarule_info.name=e},expression:"strate_datarule_info.name"}})],1)]),t._v(" "),a("el-col",{attrs:{span:7,offset:9}},[a("div",{staticClass:"col_3"},[a("el-button",{attrs:{type:"success"},on:{click:t.new_strate_datarule}},[t._v("保存")])],1)])],1)],1),t._v(" "),a("div",{staticClass:"strate_content"},[a("div",{staticClass:"legend_layout"},[a("div",{staticClass:"legend_title"},[t._v("上传时间")]),t._v(" "),a("div",{staticClass:"legend_body"},[a("el-row",[a("el-col",{staticClass:"l_h_30",attrs:{span:24}},[a("el-radio",{attrs:{label:1},model:{value:t.strate_datarule_info.is_immediately,callback:function(e){t.strate_datarule_info.is_immediately=e},expression:"strate_datarule_info.is_immediately"}},[t._v("\n                立即上传\n              ")])],1),t._v(" "),a("el-col",{staticClass:"l_h_30",attrs:{span:3}},[a("el-radio",{attrs:{label:0},model:{value:t.strate_datarule_info.is_immediately,callback:function(e){t.strate_datarule_info.is_immediately=e},expression:"strate_datarule_info.is_immediately"}},[t._v("\n                定时上传\n              ")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{size:"small",maxlength:3,disabled:!!t.strate_datarule_info.is_immediately},model:{value:t.strate_datarule_info.day,callback:function(e){t.strate_datarule_info.day=e},expression:"strate_datarule_info.day"}},[a("template",{slot:"append"},[t._v("天")])],2)],1),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.strate_datarule_info.is_immediately,expression:"!strate_datarule_info.is_immediately"}],attrs:{span:1,offset:1}},[a("div",{staticStyle:{"line-height":"26px"}},[a("el-button",{attrs:{type:"primary",icon:"plus",size:"small"},on:{click:t.addOpter}})],1)])],1),t._v(" "),t.strate_datarule_info.is_immediately?t._e():a("div",{staticClass:"time_option"},t._l(t.time_opters,function(e,i){return a("el-row",{key:e,staticClass:"m_g_10"},[a("el-col",{attrs:{span:11}},[a("el-time-select",{attrs:{size:"small",clearable:!1,editable:!1,disabled:i<t.time_opters.length-1&&1!==t.time_opters.length,placeholder:"起始时间","picker-options":{start:e.start,step:e.step,end:"23:55"}},on:{change:function(e){t.time_pickter_set(i)}},model:{value:e.starttime,callback:function(t){e.starttime=t},expression:"opter.starttime"}}),t._v(" "),a("el-time-select",{attrs:{size:"small",clearable:!1,editable:!1,disabled:i<t.time_opters.length-1&&1!==t.time_opters.length,placeholder:"结束时间","picker-options":{start:e.start,step:e.step,end:e.end,minTime:e.starttime}},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"opter.endtime"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"small",maxlength:2},model:{value:e.percent,callback:function(t){e.percent=t},expression:"opter.percent"}},[a("template",{slot:"prepend"},[t._v("随机数")]),t._v(" "),a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{staticClass:"delete_percent_btn",attrs:{icon:"delete",disabled:i<t.time_opters.length-1&&1!==t.time_opters.length||0===i,size:"small"},on:{click:t.delectOpter}})],1)],1)}))],1)]),t._v(" "),a("div",{staticClass:"legend_layout"},[a("div",{staticClass:"legend_title"},[t._v("上传失败处理")]),t._v(" "),a("div",{staticClass:"legend_body"},[a("div",{staticClass:"legend_selector"},[a("div",{staticClass:"legend_selector_item"},[a("el-radio",{attrs:{label:!0},model:{value:t.deal_with_fail,callback:function(e){t.deal_with_fail=e},expression:"deal_with_fail"}},[t._v(t._s(""))]),t._v(" "),a("span",{staticClass:"legend_selector_span"},[t._v("最近")]),t._v(" "),a("span",{staticClass:"legend_selector_span",staticStyle:{display:"inline-block",width:"90px"}},[a("el-input",{attrs:{disabled:!1===t.deal_with_fail,size:"small"},model:{value:t.strate_datarule_info.fail.num,callback:function(e){t.strate_datarule_info.fail.num=e},expression:"strate_datarule_info.fail.num"}},[a("template",{slot:"append"},[t._v("条")])],2)],1)],1),t._v(" "),a("div",{staticClass:"legend_selector_item"},[a("el-radio",{attrs:{label:!1},model:{value:t.deal_with_fail,callback:function(e){t.deal_with_fail=e},expression:"deal_with_fail"}},[t._v(t._s(""))]),t._v(" "),a("span",{staticClass:"legend_selector_span"},[t._v("不超过")]),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"100px"}},[a("el-input",{attrs:{disabled:!0===t.deal_with_fail,size:"small"},model:{value:t.strate_datarule_info.fail.maxsize,callback:function(e){t.strate_datarule_info.fail.maxsize=e},expression:"strate_datarule_info.fail.maxsize"}},[a("template",{slot:"append"},[t._v("MB")])],2)],1)],1)])])])])])])},staticRenderFns:[]}}});