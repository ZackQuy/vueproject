webpackJsonp([3],{474:function(t,e,s){function r(t){s(949)}var a=s(25)(s(920),s(970),r,null,null);t.exports=a.exports},920:function(t,e,s){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},o=s(73);e.default={data:function(){return{strates_info:{name:"",ids:[]},strates_pool_native:[]}},methods:{strate_new:function(){this.$router.push({path:"/config/strate_new"})},strates_save:function(){var t=this;this.strates_info.ids=this.strates_pool_native.filter(function(t){return t.is_active}).map(function(t){return t.id}),this.$valid([{valid:this.strates_info.name.length>3,msg:"请确认玩偶组名称长度不少于4位"},{valid:this.strates_info.name.length<17,msg:"请确认玩偶组名称长度不超过16位"},{valid:this.$rules.name_rule(this.strates_info.name),msg:"请确认玩偶组名称不包含特殊字符"},{valid:this.strates_info.ids.length,msg:"请至少选择一组玩偶"}]).then(function(){t.$store.dispatch("stratery/stratesCreate",t.strates_info)})},arraw_up:function(t){var e=[this.strates_pool_native[t-2],this.strates_pool_native[t-1]];this.strates_pool_native[t-1]=e[0],this.strates_pool_native[t-2]=e[1],this.strates_pool_native.map(function(t,e){return t._order=String(e+1).padStart(2,"0"),t}),this.strates_pool_native=[].concat(r(this.strates_pool_native))},arraw_down:function(t){var e=[this.strates_pool_native[t],this.strates_pool_native[t-1]];this.strates_pool_native[t-1]=e[0],this.strates_pool_native[t]=e[1],this.strates_pool_native=[].concat(r(this.strates_pool_native)).map(function(t,e){return t._order=String(e+1).padStart(2,"0"),t}),this.strates_pool_native=[].concat(r(this.strates_pool_native))}},computed:a({},(0,o.mapState)("stratery",["strates_pool"])),watch:{strates_pool:function(t){var e;(e=this.strates_pool_native).push.apply(e,r(t))}},mounted:function(){this.$store.dispatch("stratery/stratesPool")}}},932:function(t,e,s){e=t.exports=s(459)(!1),e.push([t.i,".page_strates_new .page_strates_info{margin:10px auto}.page_strates_new .page_body{position:relative}.page_strates_new .cell{padding:0 2px}.page_strates_new .strates_pool{margin-top:10px;margin-bottom:20px}.page_strates_new .tag_parnode{text-align:left;padding:4px}.page_strates_new .col_1,.page_strates_new .col_2,.page_strates_new .col_3{height:35px;line-height:35px}.page_strates_new .col_1{text-align:left}.page_strates_new .col_2{text-align:center;font-size:15px}.page_strates_new .col_3{text-align:right}.page_strates_new .strates_new_tip{font-size:14px;position:absolute;bottom:20px;margin-top:14px}",""])},949:function(t,e,s){var r=s(932);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);s(460)("7766ce5f",r,!0)},970:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page_inner page_strates_new"},[s("div",{staticClass:"page_head"},[s("el-breadcrumb",{attrs:{separator:">"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/config/stratery"}}},[t._v("玩偶组列表")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/config/strates_chg"}}},[t._v("更改玩偶组")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/config/strates_new"}}},[t._v("新建玩偶组")])],1)],1),t._v(" "),s("div",{staticClass:"page_body"},[s("div",{staticClass:"page_strates_info"},[s("el-row",{attrs:{align:"bottom"}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"col_1"},[s("el-input",{attrs:{placeholder:"请输入玩偶组名称"},model:{value:t.strates_info.name,callback:function(e){t.strates_info.name=e},expression:"strates_info.name"}})],1)]),t._v(" "),s("el-col",{attrs:{span:7,offset:2}},[s("div",{staticClass:"col_2"},[s("div")])]),t._v(" "),s("el-col",{attrs:{span:7}},[s("div",{staticClass:"col_3"},[s("el-button",{attrs:{type:"primary"},on:{click:t.strate_new}},[t._v("新建玩偶")]),t._v(" "),s("el-button",{attrs:{type:"success"},on:{click:t.strates_save}},[t._v("保存")])],1)])],1)],1),t._v(" "),s("div",{staticClass:"strates_pool"},[s("el-table",{staticStyle:{width:"100%"},attrs:{stripe:!0,border:"","highlight-current-row":!1,data:t.strates_pool_native}},[s("el-table-column",{attrs:{width:"60",align:"center",label:"选择"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("span",[s("el-checkbox",{model:{value:t.row.is_active,callback:function(e){t.row.is_active=e},expression:"scope.row.is_active"}})],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{width:"60",prop:"_order",align:"center",label:"序号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",align:"center",width:"90",label:"玩偶名称"}}),t._v(" "),s("el-table-column",{attrs:{label:"启动探针",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("\n              "+t._s(e.row.is_start_client?"是":"否")+"\n            ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"事件/时间/比率控制",width:"230",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[s("span",{domProps:{textContent:t._s(e.row.risk_body[0].risk_name)}}),t._v("\n               \n              "),e.row.risk_body[0].is_immediate?[s("span",{staticClass:"tag_inner_w_144"},[s("el-tag",{attrs:{type:"primary"}},[t._v("- -")])],1)]:[s("el-tag",{attrs:{type:"primary"}},[s("span",{staticStyle:{color:"#000"},domProps:{textContent:t._s(e.row.risk_body[0].time[0].start_time+"~"+e.row.risk_body[0].time[0].end_time)}}),t._v("\n                   \n                  "),s("span",{domProps:{textContent:t._s(e.row.risk_body[0].time[0].ratio.padStart(2,"0")+"%")}})]),t._v(" "),s("el-popover",{attrs:{placement:"right",width:"420",trigger:"hover"}},[s("div",{staticClass:"event_popover"},t._l(e.row.risk_body,function(e){return s("div",{staticStyle:{overflow:"hidden"}},[s("div",{staticClass:"l_e_t_r"},[s("span",{domProps:{textContent:t._s(e.risk_name)}})]),t._v(" "),s("div",{staticClass:"r_e_t_r"},[e.is_immediate?[s("el-tag",{attrs:{type:"primary"}},[t._v("--")])]:t._l(e.time,function(e){return s("el-tag",{key:e,attrs:{type:"primary"}},[s("span",{staticStyle:{color:"#000"},domProps:{textContent:t._s(e.start_time+"~"+e.end_time)}}),t._v("\n                             \n                            "),s("span",{domProps:{textContent:t._s(e.ratio.padStart(2,"0")+"%")}})])})],2)])})),t._v(" "),s("el-button",{attrs:{type:"text",icon:"more"},slot:"reference"})],1)]],2)]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"manufacturer",label:"品牌控制",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.manufacturer.includes(",")?[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.row.manufacturer.split(",")[0])}}),t._v(" "),s("el-popover",{attrs:{placement:"right",width:"160",trigger:"hover"}},[s("div",{staticClass:"basic_popover"},[t._l(e.row.manufacturer.split(","),function(e){return[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e)}})]})],2),t._v(" "),s("el-button",{attrs:{type:"text",icon:"more"},slot:"reference"})],1)]:[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.row.manufacturer.split(",")[0])}}),t._v(" "),s("span",{staticClass:"opacity_0"},[s("el-button",{attrs:{type:"text",icon:"more"}})],1)]]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"系统",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.os_version.includes(",")?[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.row.os_version.split(",")[0])}}),t._v(" "),s("el-popover",{attrs:{placement:"right",width:"160",trigger:"hover"}},[s("div",{staticClass:"basic_popover"},[t._l(e.row.os_version.split(","),function(e){return[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e)}})]})],2),t._v(" "),s("el-button",{attrs:{type:"text",icon:"more"},slot:"reference"})],1)]:[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.row.os_version.split(",")[0])}}),t._v(" "),s("span",{staticClass:"opacity_0"},[s("el-button",{attrs:{type:"text",icon:"more"}})],1)]]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"APP版本",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.app_version.includes(",")?[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.row.app_version.split(",")[0])}}),t._v(" "),s("el-popover",{attrs:{placement:"right",width:"160",trigger:"hover"}},[s("div",{staticClass:"basic_popover"},[t._l(e.row.app_version.split(","),function(e){return[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e)}})]})],2),t._v(" "),s("el-button",{attrs:{type:"text",icon:"more"},slot:"reference"})],1)]:[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.row.app_version.split(",")[0])}}),t._v(" "),s("span",{staticClass:"opacity_0"},[s("el-button",{attrs:{type:"text",icon:"more"}})],1)]]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"location",label:"区域控制",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.location.includes(",")?[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.row.location.split(",")[0])}}),t._v(" "),s("el-popover",{attrs:{placement:"left",width:"160",trigger:"hover"}},[s("div",{staticClass:"basic_popover"},[t._l(e.row.location.split(","),function(e){return[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e)}})]})],2),t._v(" "),s("el-button",{attrs:{type:"text",icon:"more"},slot:"reference"})],1)]:[s("el-tag",{attrs:{type:"primary"},domProps:{textContent:t._s(e.row.location.split(",")[0])}}),t._v(" "),s("span",{staticClass:"opacity_0"},[s("el-button",{attrs:{type:"text",icon:"more"}})],1)]]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"ROOT",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("\n              "+t._s(e.row.is_root?"是":"否")+"\n            ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[s("el-button-group",[s("el-button",{attrs:{size:"mini",disabled:e.row==t.strates_pool_native[0]},on:{click:function(s){t.arraw_up(Number(e.row._order))}}},[s("i",{staticClass:"el-icon-arrow-up"})]),t._v(" "),s("el-button",{attrs:{size:"mini",disabled:e.row==t.strates_pool_native[t.strates_pool_native.length-1]},on:{click:function(s){t.arraw_down(Number(e.row._order))}}},[s("i",{staticClass:"el-icon-arrow-down"})])],1)],1)]}}])})],1)],1),t._v(" "),s("div",{staticClass:"strates_new_tip"},[s("el-row",[s("el-col",[s("div",[t._v("\n            提示：玩偶依照列表排序顺序执行，如互斥只执行优先级高的\n          ")])])],1)],1)])])},staticRenderFns:[]}}});